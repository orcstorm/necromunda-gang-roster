@(house: models.House, 
  gang: models.Gang, 
  fighter: models.Fighter, 
  fighterProfile: models.FighterProfile, 
  weapons: List[Tuple2[String, String]], 
  weaponsArmed: Map[Int, models.ArmedWeapon], 
  cost: Int, 
  skills: List[Tuple2[String, String]], 
  fighterSkills: List[models.FighterSkill], 
  skillMap: Map[Int, String],
  wargear: List[Tuple2[String, String]],
  fighterWargear: List[models.FighterWargear],
  fighterWargearMap: Map[Int, String],
  gearCostMap: Map[Int, Int],
  combis: List[Tuple2[String, String]],
  combisArmed: Map[Int, models.ArmedCombi],
  gangList: List[Tuple2[String, String]])(implicit request: RequestHeader, messagesProvider: MessagesProvider)


@main("Necro-Manager -- " + fighter.name) {

  <ol class="breadcrumb">
    <li><a href="/">Houses of Necromunda</a></li>
    <li><a href="@routes.HouseController.show(house.id)">House @house.name</a></li>
    <li><a href="@routes.GangController.show(gang.id)">@gang.name</a></li>
    <li>
      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          Roster
          <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
          @for(ganger <- gangList) {
            @if(ganger._1.toInt == fighter.id) {
              <li><a href="@routes.FighterController.show(ganger._1.toInt)"><b>@ganger._2</b></a></li>
            } else {
              <li><a href="@routes.FighterController.show(ganger._1.toInt)">@ganger._2</a></li>
            }
          }
        </ul>
      </div>
    </li>
  </ol>

  <div class="panel panel-info">
    <div class="panel-heading lead">
      <b>@(fighter.name)</b>, @fighterProfile.fighterClass (@cost credits)
    </div>
    <div class="panel-body">


    <div class="panel panel-info">
      <div class="panel-heading"><strong>Attributes</strong></div>
      <div class="panel-body">
      @profile(fighterProfile, cost)
      </div>
    </div>


    @if(weaponsArmed.isEmpty == false) {
      <div class="panel panel-info">
        <div class="panel-heading"><strong>Weapons</strong></div>
        <div class="panel-body">@weaponList(weaponsArmed)</div>
      </div>
    }


    @if(combisArmed.isEmpty == false) {

      <div class="panel panel-info">
        <div class="panel-heading"><strong>Combis</strong></div>
        <div class="panel-body">
          @for(combi <- combisArmed) {
            <b>@combi._2.combi.name</b>
            @combi._2.cost credits
            <a href="@routes.CombiController.removeCombiFromFighter(combi._1)">
              <div class="glyphicon glyphicon-trash"></div>
            </a>
            @combiList(combi._2.subweapons)
          }
        </div>
      </div>
    }

    @if(fighterWargear.isEmpty == false) {
      <div class="panel panel-info">
        <div class="panel-heading"><strong>Wargear</strong></div>
        <div class="panel-body">
          @for(gear <- fighterWargear) {
            <a href="@routes.WargearController.show(gear.wargearId)">@fighterWargearMap(gear.wargearId)</a>
            @if(gearCostMap.contains(gear.wargearId)){ @gearCostMap(gear.wargearId) } else { 0 }
            credits
            <a href="@routes.WargearController.removeGearFromFighter(gear.id)">
              <div class="glyphicon glyphicon-trash"></div>
            </a>
          }
        </div>
      </div>
    }

    @if(fighterSkills.isEmpty == false) {
      <div class="panel panel-info">
        <div class="panel-heading"><strong>Skills</strong></div>
        <div class="panel-body">
          @for(fighterSkill <- fighterSkills) {
            @skillMap(fighterSkill.skillId)
            <a href="@routes.SkillController.removeSkillFromFighter(fighterSkill.id)">
              <div class="glyphicon glyphicon-trash"></div>
            </a>
          }
        </div>
      </div>
    }
    </div>
  </div>

  <div class="panel panel-info">
    <div class="panel-heading lead">Modify Fighter</div>
    <div class="panel-body">
      <table>
        <tr>
          <td style="width:25%;">
            <div class="lead">Add Weapon</div>

            @helper.form(action = routes.WeaponController.addWeaponToFighter()) {
              <input type="hidden" name="id" value="0"/>
              <input type="hidden" name="fighterId" value='@fighter.id'/>
              @helper.select(field = forms.Forms.weaponForm("weaponId"), options = weapons, 'class -> "form-control")
              <button type="submit" class="btn btn-default">Add Weapon</button>
            }

          </td>

          <td style="width:25%;">

              <div class="lead">Add Combi</div>
              @helper.form(action = routes.CombiController.addCombiToFighter()) {
                <input type="hidden" name="id" value="0"/>
                <input type="hidden" name="fighterId" value='@fighter.id'/>
                @helper.select( field = forms.Forms.combiFighterForm("combiId"), options = combis, 'class -> "form-control")
                <button type="submit" class="btn btn-default">Add Combi</button>
              }

          </td>

          <td style="width:25%;">
            <div class="lead">Add Wargear</div>
            @helper.form(action = routes.WargearController.addGearToFighter()) {
              <input type="hidden" name="id" value="0"/>
              <input type="hidden" name="fighterId" value='@fighter.id'/>
              @helper.select( field = forms.Forms.fighterWargearForm("wargearId"), options = wargear, 'class -> "form-control")
              <button type="submit" class="btn btn-default">Add Gear</button>
            }
          </td>

          <td style="width:25%;">
            <div class="lead">Add Skill</div>
            @helper.form(action = routes.SkillController.addSkillToFighter()) {
              <input type="hidden" name="id" value="0"/>
              <input type="hidden" name="fighterId" value='@fighter.id'/>
              @helper.select( field = forms.Forms.fighterSkillForm("skillId"), options = skills, 'class -> "form-control")
              <button type="submit" class="btn btn-default">Add Skill</button>
            }
          </td>
        </tr>
      </table>
    </div>
  </div>

}